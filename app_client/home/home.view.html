<body>
<navigation></navigation>
 <div uib-alert ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="vm.closeAlert($index)" style="margin-top: 50px">{{alert.msg}}</div>
<ng-map center="Helsinki Finland" zoom="10" on-click="vm.mapClick($event)">
	<marker ng-repeat="spot in vm.parkingspots"
		id="{{spot._id}}"
        position="{{spot.coords[1]}},{{spot.coords[0]}}"
        title="{{spot.address}}"
        on-click="vm.showInfoWindow()"
        icon="{
	        url:'images/parkingspot.png'
      	}"></marker>

      	<shape id="circle" name="circle" centered="true"
      stroke-color='#FF0000' stroke-opacity="0" stroke-weight="0"
      center="{{vm.circleCenter}}" radius="{{vm.searchRadius}}"></shape>

        <info-window id="info">
        <div class="container" style="width:200px">
        	<p>{{vm.infoParkingSpot.address}}</p>

        	<div>Rating: 
	        	<span ng-hide="vm.infoCurrentRating == 'No ratings yet.'">
		        	<span ng-show="vm.infoCurrentRating >= 1" class="glyphicon glyphicon-star"></span><span ng-hide="vm.infoCurrentRating >= 1" class="glyphicon glyphicon-star-empty"></span>
		        	<span ng-show="vm.infoCurrentRating >= 2" class="glyphicon glyphicon-star"></span><span ng-hide="vm.infoCurrentRating >= 2" class="glyphicon glyphicon-star-empty"></span>
		        	<span ng-show="vm.infoCurrentRating >= 3" class="glyphicon glyphicon-star"></span><span ng-hide="vm.infoCurrentRating >= 3" class="glyphicon glyphicon-star-empty"></span>
		        	<span ng-show="vm.infoCurrentRating >= 4" class="glyphicon glyphicon-star"></span><span ng-hide="vm.infoCurrentRating >= 4" class="glyphicon glyphicon-star-empty"></span>
		        	<span ng-show="vm.infoCurrentRating >= 5" class="glyphicon glyphicon-star"></span><span ng-hide="vm.infoCurrentRating >= 5" class="glyphicon glyphicon-star-empty"></span>
	        	</span>
	        	<span ng-show="vm.infoCurrentRating == 'No ratings yet.'">{{vm.infoCurrentRating}}</span>
        	</div>
        	<br>
        	<div>
				Time: <select ng-model="vm.infoTimeSelect" ng-change="vm.timeSelectChange()" ng-options="time.timespan as time.timespan for time in vm.ratingList"></select>
			</div>
			<br>
			<button class="btn btn-primary" ng-click="vm.addReview(vm.clickedMarkerId)">Leave a review!</button>
        </div>
      	</info-window>
      	<info-window id="newSpotInfo">
	        <div class="container" style="width:250px">
	        	<p>No parking spot found at this location, are you sure you want to leave a review here?</p>
	        	
					<a href="#" class="btn btn-success btn-sm" ng-click="vm.createNewSpot()">Add review</a>
					<a href="#" class="btn btn-danger btn-sm" ng-click="vm.closeNewSpotInfo()">Select another spot</a>
			
	        </div>
      	</info-window>

</ng-map>

<div class="btn-group btn-group-justified">
<a href="#" class="btn btn-primary" ng-click="vm.nearCurrentLocation()">Find nearby</a>
<a href="#" class="btn btn-primary" ng-click="vm.showAll()">Find all</a>
<a href="#" class="btn btn-primary" ng-click="vm.showResolverModal()">Near address</a>
<a href="#" class="btn btn-primary" ng-click="vm.addReview()" uib-popover="Please select a parkingspot to review."  popover-append-to-body="true" popover-trigger="'focus'">Add review</a>
</div>


</body>
<br>
<footer> <p>Parkmaniaâ„¢ by team Kiwi <p></footer>